<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Gerar Senha</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-card>
    <ion-card-header>
      <ion-card-title>Gerador de Senhas</ion-card-title>
      <ion-card-subtitle>Configure as opções e gere uma senha segura</ion-card-subtitle>
    </ion-card-header>

    <ion-card-content>
      <!-- Senha gerada -->
      <ion-item>
        <ion-label position="stacked">Senha Gerada</ion-label>
        <ion-input 
          [value]="password" 
          readonly
          [type]="showPassword ? 'text' : 'password'"
          placeholder="Clique em 'Gerar Nova Senha' para criar uma senha">
        </ion-input>
        <ion-button 
          fill="clear" 
          slot="end" 
          (click)="showPassword = !showPassword">
          <ion-icon [name]="showPassword ? 'eye-off' : 'eye'"></ion-icon>
        </ion-button>
      </ion-item>

      <!-- Exemplo visual dos tipos de caracteres -->
      <ion-card *ngIf="!password" color="light">
        <ion-card-header>
          <ion-card-title>Exemplo de Caracteres Disponíveis</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <div class="character-preview">
            <div class="character-type" *ngIf="passwordOptions.includeUppercase">
              <strong>Maiúsculas:</strong> <span class="char-example">A B C D E F G H I J K L M N O P Q R S T U V W X Y Z</span>
            </div>
            <div class="character-type" *ngIf="passwordOptions.includeLowercase">
              <strong>Minúsculas:</strong> <span class="char-example">a b c d e f g h i j k l m n o p q r s t u v w x y z</span>
            </div>
            <div class="character-type" *ngIf="passwordOptions.includeNumbers">
              <strong>Números:</strong> <span class="char-example">0 1 2 3 4 5 6 7 8 9</span>
            </div>
            <div class="character-type" *ngIf="passwordOptions.includeSymbols">
              <strong>Símbolos:</strong> <span class="char-example">! &#64; # $ % ^ & * ( ) _ + - = [ ] &#123; &#125; | ; : , . < > ?</span>
            </div>
            <div class="character-type" *ngIf="passwordOptions.includeSpaces">
              <strong>Espaços:</strong> <span class="char-example space-char">⬜ ⬜ ⬜ ⬜ ⬜</span>
            </div>
            <div class="character-type" *ngIf="!canGeneratePassword()">
              <ion-text color="warning">
                <ion-icon name="warning" slot="start"></ion-icon>
                Selecione pelo menos um tipo de caractere para gerar a senha
              </ion-text>
            </div>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- Botões de ação -->
      <ion-button 
        expand="block" 
        (click)="generatePassword()"
        [disabled]="!canGeneratePassword()"
        class="ion-margin-top">
        <ion-icon name="refresh" slot="start"></ion-icon>
        Gerar Nova Senha
      </ion-button>

      <ion-button 
        expand="block" 
        fill="outline"
        (click)="generateSpacesOnly()"
        class="ion-margin-top"
        color="secondary">
        <ion-icon name="remove" slot="start"></ion-icon>
        Gerar Apenas Espaços
      </ion-button>

      <ion-button 
        expand="block" 
        fill="outline" 
        (click)="copyToClipboard()"
        [disabled]="!password"
        class="ion-margin-top">
        <ion-icon name="copy" slot="start"></ion-icon>
        Copiar Senha
      </ion-button>

      <ion-button 
        expand="block" 
        fill="outline" 
        (click)="savePassword()"
        [disabled]="!password"
        class="ion-margin-top">
        <ion-icon name="save" slot="start"></ion-icon>
        Salvar Senha
      </ion-button>

      <!-- Opções de geração -->
      <ion-list class="ion-margin-top">
        <ion-list-header>
          <ion-label>Configurações da Senha</ion-label>
        </ion-list-header>

        <ion-item>
          <ion-label>Comprimento: {{ passwordOptions.length }}</ion-label>
          <ion-range 
            [value]="passwordOptions.length"
            min="4" 
            max="50"
            (ionChange)="onLengthChange($event)"
            color="primary">
          </ion-range>
        </ion-item>

        <ion-item>
          <ion-checkbox 
            [checked]="passwordOptions.includeUppercase"
            (ionChange)="updateOption('includeUppercase', $event.detail.checked)"
            slot="start">
          </ion-checkbox>
          <ion-label>
            <h3>Incluir Maiúsculas (A-Z)</h3>
            <p class="character-example">A B C D E F G H I J K L M N O P Q R S T U V W X Y Z</p>
          </ion-label>
        </ion-item>

        <ion-item>
          <ion-checkbox 
            [checked]="passwordOptions.includeLowercase"
            (ionChange)="updateOption('includeLowercase', $event.detail.checked)"
            slot="start">
          </ion-checkbox>
          <ion-label>
            <h3>Incluir Minúsculas (a-z)</h3>
            <p class="character-example">a b c d e f g h i j k l m n o p q r s t u v w x y z</p>
          </ion-label>
        </ion-item>

        <ion-item>
          <ion-checkbox 
            [checked]="passwordOptions.includeNumbers"
            (ionChange)="updateOption('includeNumbers', $event.detail.checked)"
            slot="start">
          </ion-checkbox>
          <ion-label>
            <h3>Incluir Números (0-9)</h3>
            <p class="character-example">0 1 2 3 4 5 6 7 8 9</p>
          </ion-label>
        </ion-item>

        <ion-item>
          <ion-checkbox 
            [checked]="passwordOptions.includeSymbols"
            (ionChange)="updateOption('includeSymbols', $event.detail.checked)"
            slot="start">
          </ion-checkbox>
          <ion-label>
            <h3>Incluir Símbolos Especiais</h3>
            <p class="character-example">! &#64; # $ % ^ & * ( ) _ + - = [ ] &#123; &#125; | ; : , . < > ?</p>
          </ion-label>
        </ion-item>

        <ion-item>
          <ion-checkbox 
            [checked]="passwordOptions.includeSpaces"
            (ionChange)="updateOption('includeSpaces', $event.detail.checked)"
            slot="start">
          </ion-checkbox>
          <ion-label>
            <h3>Incluir Espaços</h3>
            <p class="character-example space-example">⬜ ⬜ ⬜ ⬜ ⬜</p>
            <p class="space-description"><small>Representação visual dos espaços</small></p>
          </ion-label>
        </ion-item>

        <!-- Informação sobre espaços -->
        <ion-item *ngIf="passwordOptions.includeSpaces" color="light">
          <ion-icon name="information-circle" slot="start" color="primary"></ion-icon>
          <ion-label>
            <p>Os espaços serão incluídos na senha gerada</p>
            <p><small>Use o botão "Gerar Apenas Espaços" para criar senhas só com espaços</small></p>
          </ion-label>
        </ion-item>

        <ion-item>
          <ion-checkbox 
            [checked]="passwordOptions.excludeSimilar"
            (ionChange)="updateOption('excludeSimilar', $event.detail.checked)"
            slot="start">
          </ion-checkbox>
          <ion-label>Excluir Caracteres Similares</ion-label>
        </ion-item>

        <ion-item>
          <ion-checkbox 
            [checked]="passwordOptions.excludeAmbiguous"
            (ionChange)="updateOption('excludeAmbiguous', $event.detail.checked)"
            slot="start">
          </ion-checkbox>
          <ion-label>Excluir Caracteres Ambíguos</ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>
</ion-content>
